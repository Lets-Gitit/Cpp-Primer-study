# Chapter 4

---

## [ 비트 시프트 연산자 ]

**왼쪽 시프트 연산자**

- 비트를 왼쪽으로 이동시키고, 비어있는 오른쪽 비트 공간을 0으로 채웁니다.
- 주요 기능
    1. 2의 거듭제곱 곱셈
        - a를 2^b 만큼 곱하는 것과 동일한 효과를 냅니다.
    2. 특정 비트 위치 설정
        - 특정 비트를 1로 만들거나, 비트 마스크를 만들 때 사용됩니다.
        - 1 << 4 는 00010000 이라는 비트 패턴을 만들어, 5번째 비트만 1로 설정하는 데 사용될 수 있습니다.

**오른쪽 시프트 연산자**

- 오른쪽 시프트 연산자는 비트를 오른쪽으로 이동시킵니다.
- 주요 기능
    1. 2의 거듭제곱 나눗셈
        - a 를 2^b 만큼 나누는 것과 동일한 효과를 냅니다.
    2. 특정 비트 값 추출
        - 특정 비트의 값을 읽기 위해 다른 비트들을 제거할 때 사용됩니다.

---

## [ IO << ]

**역할**

1. 데이터 출력
    - 연산자의 오른쪽에 있는 데이터를 문자열 형태로 변환합니다.
    - 예를 들어, 정수 100은 1, 0, 0으로 변환됩니다.
2. 스트림에 삽입
    - 변환된 문자열 데이터를 cout이 관리하는 출력 스트림으로 보냅니다.

**우선순위**

```cpp
( (cout << "hi") << "there" )<< endl;
```

- 연산자는 중간 우선순위를 가집니다.
    - 산술 연산자보다 낮습니다.  ( > )
    - 관계 연산자 ,할당 연산자, 조건 연산자보다 높습니다. ( < )

---

## [ sizeof ]

- 컴파일 타임 연산자
    - sizeof는 프로그램이 실행되기 전에 컴파일러에 의해 계산됩니다.
    - 따라서 실행 중에 동적으로 변하는 값을 정확히 알려주지 않습니다.
- 단위
    - 반환된 값의 단위는 바이트입니다.
    - 반환 타입은 size_t이면 부호없는 정수입니다.

**주의할 점**

- sizeof 연산자는 참조에 대해 사용하면, 참조가 가리키는 원래 객체의 크기를 반환합니다.
    
    ```cpp
    int i = 10;
    int& ref = i;
    std::cout << sizeof(ref) // i 의 크기인 4를 반환
    ```
    

- sizeof 연산자는 포인터에 대해 사용하면, 포인터가 가리키는 객체의 크기가 아닌, 포인터 자체의 크기를 반환합니다.
    
    ```cpp
    int* ptr;
    std::cout << sizeof(ptr) // 8을 출력 ( x64 기준 )
    ```
    

---

## [ static_cast ]

- 컴파일 타임에 안전하다고 판단되는 타입 변환을 수행합니다.
- 즉, 컴파일러가 미리 변환 가능성을 검사합니다.

**주요 용도**

- 숫자 타입 간 변환
    - int를 double, float를 int로 변환하는 등 데이터 손실이 예상되는 변환에도 사용됩니다.
- 포인터 타입 변환
    - 상속 관계에 있는 클래스 포인터 간에 변환할 때 사용됩니다.
    - 다운 캐스팅
        - 부모 클래스의 포인터를 자식 클래스의 포인터로 변환합니다.
        - 안전하지 않을 수 있습니다.
    - 업 캐스팅
        - 자식 클래스의 포인터를 부모 클래스의 포인터를 변환합니다.
        - 항상 안전한 변환

**enum class**

- enum class의 값을 정수형으로 안전하게 변환할 수 있습니다.
    
    ```cpp
    enum class Color : int { RED = 1, GREEN = 2, BLUE = 3 };
    
    int main(void)
    {
    	Color color = Color::GREEN;
    	int value = static_cast<int>(color);
    } 
    ```
    

- 정수를 enum class값으로 바꿀 때도 사용할 수 있습니다.
    
    ```cpp
    Color c = static_cast<Color>(2);
    ```
    

---

## [ dynamic_cast ]

- 런타임에 안전한 타입 변환을 수행합니다.
- 주로 상속 관계에 있는 클래스 포인터나 참조에 사용됩니다.
- 성공하면 올바른 포인터, 실패하면 nullptr 또는 std::bad_cast

**주요 용도**

- 안전한 다운 캐스팅
    - 부모 클래스 포인터가 실제로 자식 클래스 객체를 가리키는지 확인하며 변환합니다.
    - dynamic_cast는 virtual 함수를 하나 이상 가진 다형적 클래스에서만 사용 가능합니다 .
- 객체의 실제 타입 확인
    - 어떤 포인터가 가리키는 객체의 실제 타입을 런타임에 확인하는 데 사용됩니다.
    
    ```cpp
    class Parent { public: virtual ~Parent() {} };
    class Child : public Parent {};
    Parent* p1 = new Child();
    Parent* p2 = new Parent();
    
    // 성공하는 경우: p1은 실제 Child 객체를 가리킴
    Child* c1 = dynamic_cast<Child*>(p1);
    if (c1) {
        std::cout << "p1은 Child 타입입니다." << std::endl;
    }
    
    // 실패하는 경우: p2는 Parent 객체를 가리킴
    Child* c2 = dynamic_cast<Child*>(p2);
    if (!c2) {
        std::cout << "p2는 Child 타입이 아닙니다. nullptr 반환." << std::endl;
    }
    ```
    

---

## [ reinterptret_cast ]

- 가장 위험한 캐스팅 연산입니다.
- 비트 수준의 변환을 수행하며, 타입 검사를 전혀 하지 않습니다.
- 내가 이 포인터를 다른 타입으로 다시 해석할 것이니, 그냥 넘어가라

**주요 용도**

- 서로 관련 없는 포인터 타입 간 변환
    - int*를 char*로 변환하거나, 함수 포인터를 void*로 변환하는 등 매우 낮은 수준의 메모리 조작에 사용됩니다.
- 하드웨어 관련 프로그래밍
    - 하드웨어 주소를 나타내는 정수 값을 포인터로 변환하는 경우 등에 사용될 수 있습니다.
